# Mod key
set $mod Mod4

# Colours
set $dark  #2b303b
set $grey  #65737e
set $light #e7e8eb
set $blue  #96b5b4

# Font
font pango: Source Sans Pro 10

# Direction keys
set $left h
set $down j
set $up k
set $right l

# Mod key to drag floating windows
floating_modifier Mod4

# Start terminal
bindsym $mod+Return exec termite

# Kill focused window
bindsym $mod+shift+q kill

# Start rofi
bindsym $mod+d exec /home/jason/scripts/rofi.sh

# Change focus
bindsym $mod+$left  focus left
bindsym $mod+$down  focus down
bindsym $mod+$up    focus up
bindsym $mod+$right focus right
bindsym $mod+Left   focus left
bindsym $mod+Down   focus down
bindsym $mod+Up     focus up
bindsym $mod+Right  focus right

# Split vertical/horizontal
bindsym $mod+g split h
bindsym $mod+v split v

# Change layout (fullscreen, stacked, tabbed, toggle split)
bindsym $mod+f fullscreen toggle
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# Toggle tiling / floating
bindsym $mod+Shift+space floating toggle
# Change between tiling / floating windows
bindsym $mod+space focus mode_toggle

# Focus the parent container
#bindsym $mod+a focus parent
# Focus the child container
#bindsym $mod+d focus child

# Move the current window to scratchpad
bindsym $mod+Shift+0 move scratchpad
# Show scratchpad window
bindsym $mod+0 scratchpad show

# Workspaces
#set $ws1  "1: üåê"
#set $ws2  "2: ‚å®"
#set $ws3  "3: ‚ßâ"
#set $ws4  "4: üéß"
set $ws1  "1"
set $ws2  "2"
set $ws3  "3"
set $ws4  "4"
set $ws5  "5"
set $ws6  "6"
set $ws7  "7"
set $ws8  "8"
set $ws9  "9"

# Switch to workspace
bindsym $mod+1 workspace $ws1
bindsym $mod+2 workspace $ws2
bindsym $mod+3 workspace $ws3
bindsym $mod+4 workspace $ws4
bindsym $mod+5 workspace $ws5
bindsym $mod+6 workspace $ws6
bindsym $mod+7 workspace $ws7
bindsym $mod+8 workspace $ws8
bindsym $mod+9 workspace $ws9

# Move window to workspace
bindsym $mod+Shift+1 move container to workspace $ws1
bindsym $mod+Shift+2 move container to workspace $ws2
bindsym $mod+Shift+3 move container to workspace $ws3
bindsym $mod+Shift+4 move container to workspace $ws4
bindsym $mod+Shift+5 move container to workspace $ws5
bindsym $mod+Shift+6 move container to workspace $ws6
bindsym $mod+Shift+7 move container to workspace $ws7
bindsym $mod+Shift+8 move container to workspace $ws8
bindsym $mod+Shift+9 move container to workspace $ws9

# Reload the configuration file
bindsym $mod+Shift+c reload
# Restart i3 inplace
bindsym $mod+Shift+r restart
# Exit i3
bindsym $mod+Shift+e exec --no-startup-id "i3-nagbar -t warning -m '' -b 'Log out' 'i3-msg exit' -b 'Shutdown' 'systemctl poweroff' -b 'Restart' 'systemctl reboot'"

# Resize and move window
mode "Resize & Move" {
    # Pressing left will shrink the window‚Äôs width.
    # Pressing right will grow the window‚Äôs width.
    # Pressing up will shrink the window‚Äôs height.
    # Pressing down will grow the window‚Äôs height.
    bindsym $left  resize shrink width  10 px or 10 ppt
    bindsym $down  resize grow   height 10 px or 10 ppt
    bindsym $up    resize shrink height 10 px or 10 ppt
    bindsym $right resize grow   width  10 px or 10 ppt
    bindsym Left  resize shrink width  10 px or 10 ppt
    bindsym Down  resize grow   height 10 px or 10 ppt
    bindsym Up    resize shrink height 10 px or 10 ppt
    bindsym Right resize grow   width  10 px or 10 ppt
    # Faster
    bindsym Shift+$left  resize shrink width  30 px or 30 ppt
    bindsym Shift+$down  resize grow   height 30 px or 30 ppt
    bindsym Shift+$up    resize shrink height 30 px or 30 ppt
    bindsym Shift+$right resize grow   width  30 px or 30 ppt
    bindsym Shift+Left   resize shrink width  30 px or 30 ppt
    bindsym Shift+Down   resize grow   height 30 px or 30 ppt
    bindsym Shift+Up     resize shrink height 30 px or 30 ppt
    bindsym Shift+Right  resize grow   width  30 px or 30 ppt
    
    # Move focused window
    bindsym $mod+$left  move left 
    bindsym $mod+$down  move down 
    bindsym $mod+$up    move up 
    bindsym $mod+$right move right 
    bindsym $mod+Left   move left 
    bindsym $mod+Down   move down 
    bindsym $mod+Up     move up 
    bindsym $mod+Right  move right 
    # Faster
    bindsym $mod+Shift+$left  move left 30
    bindsym $mod+Shift+$down  move down 30
    bindsym $mod+Shift+$up    move up 30
    bindsym $mod+Shift+$right move right 30
    bindsym $mod+Shift+Left   move left 30
    bindsym $mod+Shift+Down   move down 30
    bindsym $mod+Shift+Up     move up 30
    bindsym $mod+Shift+Right  move right 30

    # Back to normal
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+r mode "Resize & Move"

# Window Colours        border background text   indicator
client.focused          $light $light     $dark  $blue
client.focused_inactive $dark  $dark      $light $blue
client.unfocused        $dark  $dark      $light $blue
client.urgent           $dark  $blue      $dark  $blue

# Start i3bar to display a workspace bar
bar {
    status_command i3blocks -c ~/.i3/i3blocks.conf
    colors {
        separator  $dark
        background $dark
        statusline $light
        #                  border  background text
        focused_workspace  $dark   $dark      $light
        active_workspace   $dark   $dark      $grey
        inactive_workspace $dark   $dark      $grey
        urgent_workspace   $dark   $blue      $dark
    }
    position bottom
}

#
# Something, something, added stuff below
#

# i3gaps (https://github.com/Airblader/i3)
mode "$mode_gaps" {
    bindsym o      mode "$mode_gaps_outer" 
    bindsym i      mode "$mode_gaps_inner"
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
mode "$mode_gaps_inner" {
    bindsym plus  gaps inner current plus 5
    bindsym minus gaps inner current minus 5
    bindsym 0     gaps inner current set 0
    bindsym r     gaps inner current set 20

    bindsym Shift+plus  gaps inner all plus 5
    bindsym Shift+minus gaps inner all minus 5
    bindsym Shift+0     gaps inner all set 0
    bindsym Shift+r     gaps inner all set 20

    bindsym Return mode "default"
    bindsym Escape mode "default"
}
mode "$mode_gaps_outer" {
    bindsym plus  gaps outer current plus 5
    bindsym minus gaps outer current minus 5
    bindsym 0     gaps outer current set 0

    bindsym Shift+plus  gaps outer all plus 5
    bindsym Shift+minus gaps outer all minus 5
    bindsym Shift+0     gaps outer all set 0

    bindsym Return mode "default"
    bindsym Escape mode "default"
}
# Resize Gaps
set $mode_gaps Gaps: (o) outer, (i) inner
set $mode_gaps_outer Outer Gaps: +|-|0 (local), Shift + +|-|0 (global)
set $mode_gaps_inner Inner Gaps: +|-|0 (local), Shift + +|-|0 (global)
bindsym $mod+Shift+g mode "$mode_gaps"
# Set gaps
gaps inner 10
# Workspace 1 has no gaps
workspace $ws1 gaps inner 0
workspace $ws1 gaps outer 0

# Workspace 3 is floating
for_window [workspace=$ws3] floating enable
# Windows are floating
for_window [class="Thunar"] floating enable
for_window [class="Ristretto"] floating enable

# Open windows on certain workspaces
assign [class="VirtualBox"] $ws3
assign [class="discord"] $ws8
for_window [class="Spotify"] move to workspace $ws5

# Window border thickness
for_window [class="^.*"] border pixel 3
for_window [class="Xfce4-notifyd"] border pixel 0

# Sticky Windows
bindsym $mod+Shift+s sticky toggle

# Move window to center
bindsym $mod+c move position center

# Media player controls
set $musicupdate pkill -RTMIN+10 i3blocks
bindsym XF86AudioPlay exec --no-startup-id playerctl play-pause && $musicupdate
bindsym XF86AudioStop exec --no-startup-id playerctl stop && $musicupdate
bindsym XF86AudioNext exec --no-startup-id playerctl next && $musicupdate
bindsym XF86AudioPrev exec --no-startup-id playerctl previous && $musicupdate
# Pulse Audio controls
set $audioupdate pkill -RTMIN+1 i3blocks
bindsym XF86AudioRaiseVolume exec --no-startup-id amixer set Master 2%+ && $audioupdate
bindsym XF86AudioLowerVolume exec --no-startup-id amixer set Master 2%- && $audioupdate
bindsym XF86AudioMute        exec --no-startup-id amixer set -D pulse Master 1+ toggle && $audioupdate
# Screen brightness controls
bindsym XF86MonBrightnessUp   exec --no-startup-id xbacklight -inc 10
bindsym XF86MonBrightnessDown exec --no-startup-id xbacklight -dec 10

# i3blocks key indicator update
bindsym --release Caps_Lock exec --no-startup-id pkill -RTMIN+11 i3blocks
bindsym --release Num_Lock  exec --no-startup-id pkill -RTMIN+11 i3blocks

# Keyboard led - scroll lock led
bindsym ctrl+shift+Mod1+l exec --no-startup-id /home/jason/scripts/scrlk.sh

# Starts i3lock - lockscreen
bindsym $mod+shift+x exec --no-startup-id /home/jason/scripts/lock.sh

# Start Thunar - file manager
bindsym $mod+shift+Return exec thunar

# Run some stuff at startup
exec --no-startup-id xset r rate 270 27 # keyboard repeat rate
exec --no-startup-id xset m 0 0 # no mouse accel
exec --no-startup-id sleep 1; nm-applet # wifi menu applet
exec_always --no-startup-id compton --opengl --vsync opengl # shadows, fade, vsync, etc
exec_always --no-startup-id feh --bg-fill /home/jason/Pictures/wallpaper.jpg # background
